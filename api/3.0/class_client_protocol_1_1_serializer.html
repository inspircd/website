<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>InspIRCd: ClientProtocol::Serializer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">InspIRCd
   &#160;<span id="projectnumber">3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>ClientProtocol</b></li><li class="navelem"><a class="el" href="class_client_protocol_1_1_serializer.html">Serializer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_client_protocol_1_1_serializer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ClientProtocol::Serializer Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="clientprotocol_8h_source.html">clientprotocol.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ClientProtocol::Serializer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_client_protocol_1_1_serializer.png" usemap="#ClientProtocol::Serializer_map" alt=""/>
  <map id="ClientProtocol::Serializer_map" name="ClientProtocol::Serializer_map">
<area href="class_data_provider.html" alt="DataProvider" shape="rect" coords="0,112,151,136"/>
<area href="class_service_provider.html" alt="ServiceProvider" shape="rect" coords="0,56,151,80"/>
<area href="classclassbase.html" alt="classbase" shape="rect" coords="0,0,151,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2f4517d7ae0c539c4885b04cefb5bf34"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_protocol_1_1_serializer.html#a2f4517d7ae0c539c4885b04cefb5bf34">Serializer</a> (<a class="el" href="class_module.html">Module</a> *mod, const char *Name)</td></tr>
<tr class="separator:a2f4517d7ae0c539c4885b04cefb5bf34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ada17e0ddfaf18217804f35b5eb085b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_protocol_1_1_serializer.html#a7ada17e0ddfaf18217804f35b5eb085b">HandleTag</a> (<a class="el" href="class_local_user.html">LocalUser</a> *user, const std::string &amp;tagname, std::string &amp;tagvalue, <a class="el" href="classinsp_1_1flat__map.html">TagMap</a> &amp;tags) const</td></tr>
<tr class="separator:a7ada17e0ddfaf18217804f35b5eb085b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0523d7b1f9f3986b202d8f53d9f42b6"><td class="memItemLeft" align="right" valign="top">const SerializedMessage &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_protocol_1_1_serializer.html#aa0523d7b1f9f3986b202d8f53d9f42b6">SerializeForUser</a> (<a class="el" href="class_local_user.html">LocalUser</a> *user, <a class="el" href="class_client_protocol_1_1_message.html">Message</a> &amp;msg)</td></tr>
<tr class="separator:aa0523d7b1f9f3986b202d8f53d9f42b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef58993ddfb5761184047a6fa47be340"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_protocol_1_1_serializer.html#aef58993ddfb5761184047a6fa47be340">Serialize</a> (const <a class="el" href="class_client_protocol_1_1_message.html">Message</a> &amp;msg, const <a class="el" href="class_client_protocol_1_1_tag_selection.html">TagSelection</a> &amp;tagwl) const =0</td></tr>
<tr class="separator:aef58993ddfb5761184047a6fa47be340"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cfd17d0fd21c9c25a679df4b7700295"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_client_protocol_1_1_serializer.html#a9cfd17d0fd21c9c25a679df4b7700295">Parse</a> (<a class="el" href="class_local_user.html">LocalUser</a> *user, const std::string &amp;line, <a class="el" href="struct_client_protocol_1_1_parse_output.html">ParseOutput</a> &amp;parseoutput)=0</td></tr>
<tr class="separator:a9cfd17d0fd21c9c25a679df4b7700295"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_data_provider"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_data_provider')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_data_provider.html">DataProvider</a></td></tr>
<tr class="memitem:a3e2cc116a18c6d1ae5c3afec3258bd4f inherit pub_methods_class_data_provider"><td class="memItemLeft" align="right" valign="top"><a id="a3e2cc116a18c6d1ae5c3afec3258bd4f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>DataProvider</b> (<a class="el" href="class_module.html">Module</a> *Creator, const std::string &amp;Name)</td></tr>
<tr class="separator:a3e2cc116a18c6d1ae5c3afec3258bd4f inherit pub_methods_class_data_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_service_provider"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_service_provider')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_service_provider.html">ServiceProvider</a></td></tr>
<tr class="memitem:a3e7e92ecd0683a0b4348b8fd14eb734b inherit pub_methods_class_service_provider"><td class="memItemLeft" align="right" valign="top"><a id="a3e7e92ecd0683a0b4348b8fd14eb734b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ServiceProvider</b> (<a class="el" href="class_module.html">Module</a> *Creator, const std::string &amp;Name, ServiceType Type)</td></tr>
<tr class="separator:a3e7e92ecd0683a0b4348b8fd14eb734b inherit pub_methods_class_service_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed77d91b39d5df569be84172e50e4cc4 inherit pub_methods_class_service_provider"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_service_provider.html#aed77d91b39d5df569be84172e50e4cc4">RegisterService</a> ()</td></tr>
<tr class="separator:aed77d91b39d5df569be84172e50e4cc4 inherit pub_methods_class_service_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87185e6ebfa0f4960f20797e716c72d6 inherit pub_methods_class_service_provider"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_service_provider.html#a87185e6ebfa0f4960f20797e716c72d6">DisableAutoRegister</a> ()</td></tr>
<tr class="separator:a87185e6ebfa0f4960f20797e716c72d6 inherit pub_methods_class_service_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classclassbase"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classclassbase')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classclassbase.html">classbase</a></td></tr>
<tr class="memitem:a2a773ec2f42d047e0ce250553f44d831 inherit pub_methods_classclassbase"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_cull_result.html">CullResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classclassbase.html#a2a773ec2f42d047e0ce250553f44d831">cull</a> ()</td></tr>
<tr class="separator:a2a773ec2f42d047e0ce250553f44d831 inherit pub_methods_classclassbase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_attribs_class_service_provider"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_class_service_provider')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="class_service_provider.html">ServiceProvider</a></td></tr>
<tr class="memitem:ad1dfa94bef361c61dfadefff1454bef9 inherit pub_attribs_class_service_provider"><td class="memItemLeft" align="right" valign="top">ModuleRef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_service_provider.html#ad1dfa94bef361c61dfadefff1454bef9">creator</a></td></tr>
<tr class="separator:ad1dfa94bef361c61dfadefff1454bef9 inherit pub_attribs_class_service_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dace4b64886f5cabd5a406d0f9e7e11 inherit pub_attribs_class_service_provider"><td class="memItemLeft" align="right" valign="top">const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_service_provider.html#a1dace4b64886f5cabd5a406d0f9e7e11">name</a></td></tr>
<tr class="separator:a1dace4b64886f5cabd5a406d0f9e7e11 inherit pub_attribs_class_service_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a398d7fbc50d368467964f93bd093aabd inherit pub_attribs_class_service_provider"><td class="memItemLeft" align="right" valign="top">const ServiceType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_service_provider.html#a398d7fbc50d368467964f93bd093aabd">service</a></td></tr>
<tr class="separator:a398d7fbc50d368467964f93bd093aabd inherit pub_attribs_class_service_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Base class for client protocol serializers. A serializer has to implement serialization and parsing of protocol messages to/from wire format. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a2f4517d7ae0c539c4885b04cefb5bf34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f4517d7ae0c539c4885b04cefb5bf34">&#9670;&nbsp;</a></span>Serializer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ClientProtocol::Serializer::Serializer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_module.html">Module</a> *&#160;</td>
          <td class="paramname"><em>mod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>Name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mod</td><td><a class="el" href="class_module.html">Module</a> owning the serializer. </td></tr>
    <tr><td class="paramname">Name</td><td>Name of the serializer, e.g. "rfc". </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a7ada17e0ddfaf18217804f35b5eb085b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ada17e0ddfaf18217804f35b5eb085b">&#9670;&nbsp;</a></span>HandleTag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ClientProtocol::Serializer::HandleTag </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_local_user.html">LocalUser</a> *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>tagname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>tagvalue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classinsp_1_1flat__map.html">TagMap</a> &amp;&#160;</td>
          <td class="paramname"><em>tags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Handle a tag in a message being parsed. Call this method for each parsed tag. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">user</td><td><a class="el" href="class_user.html">User</a> sending the tag. </td></tr>
    <tr><td class="paramname">tagname</td><td>Name of the tag. </td></tr>
    <tr><td class="paramname">tagvalue</td><td>Tag value, may be empty. </td></tr>
    <tr><td class="paramname">tags</td><td>TagMap to place the tag into, if it gets accepted. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if no error occurred, false if the tag name is invalid or if this tag already exists. </dd></dl>

</div>
</div>
<a id="a9cfd17d0fd21c9c25a679df4b7700295"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cfd17d0fd21c9c25a679df4b7700295">&#9670;&nbsp;</a></span>Parse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool ClientProtocol::Serializer::Parse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_local_user.html">LocalUser</a> *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_client_protocol_1_1_parse_output.html">ParseOutput</a> &amp;&#160;</td>
          <td class="paramname"><em>parseoutput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Parse a protocol message from wire format. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">user</td><td>Source of the message. </td></tr>
    <tr><td class="paramname">line</td><td>Raw protocol message. </td></tr>
    <tr><td class="paramname">parseoutput</td><td>Output of the parser. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the message was parsed successfully into parseoutput and should be processed, false to drop the message. </dd></dl>

</div>
</div>
<a id="aef58993ddfb5761184047a6fa47be340"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef58993ddfb5761184047a6fa47be340">&#9670;&nbsp;</a></span>Serialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::string ClientProtocol::Serializer::Serialize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_client_protocol_1_1_message.html">Message</a> &amp;&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_client_protocol_1_1_tag_selection.html">TagSelection</a> &amp;&#160;</td>
          <td class="paramname"><em>tagwl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Serialize a high level protocol message into wire format. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>High level message to serialize. Contains all necessary information about the message, including all possible tags. </td></tr>
    <tr><td class="paramname">tagwl</td><td><a class="el" href="class_client_protocol_1_1_message.html">Message</a> tags to include in the serialized message. Tags attached to the message but not included in the whitelist must not appear in the output. This is because each user may get a different set of tags for the same message. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Protocol message in wire format. Must contain message delimiter as well, if any (e.g. CRLF for RFC1459). </dd></dl>

</div>
</div>
<a id="aa0523d7b1f9f3986b202d8f53d9f42b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0523d7b1f9f3986b202d8f53d9f42b6">&#9670;&nbsp;</a></span>SerializeForUser()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const ClientProtocol::SerializedMessage &amp; ClientProtocol::Serializer::SerializeForUser </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_local_user.html">LocalUser</a> *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_client_protocol_1_1_message.html">Message</a> &amp;&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Serialize a message for a user. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">user</td><td><a class="el" href="class_user.html">User</a> to serialize the message for. </td></tr>
    <tr><td class="paramname">msg</td><td><a class="el" href="class_client_protocol_1_1_message.html">Message</a> to serialize. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Raw serialized message, only containing the appropriate tags for the user. The reference is guaranteed to be valid as long as the <a class="el" href="class_client_protocol_1_1_message.html">Message</a> object is alive and until the same <a class="el" href="class_client_protocol_1_1_message.html">Message</a> is serialized for another user. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/<a class="el" href="clientprotocol_8h_source.html">clientprotocol.h</a></li>
<li>src/clientprotocol.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
